<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificar Formulario en Vercel</title>
    <script type="module">
        import { obtenerFormularioEnviadoPorId, verificarConexionFirestore } from './firestore.js';
        
        // Funci√≥n para verificar el formulario espec√≠fico
        async function verificarFormulario() {
            try {
                console.log('=== VERIFICANDO FORMULARIO EN VERCEL ===');
                
                // Primero verificar la conexi√≥n
                console.log('1. Verificando conexi√≥n a Firestore...');
                await verificarConexionFirestore();
                
                // Luego buscar el formulario espec√≠fico
                console.log('2. Buscando formulario: 2UxEfD7zMcURyeapZV8G');
                const formulario = await obtenerFormularioEnviadoPorId('2UxEfD7zMcURyeapZV8G');
                
                if (formulario) {
                    console.log('‚úÖ Formulario encontrado:', formulario);
                    document.getElementById('resultado').innerHTML = `
                        <div style="background: #d4edda; padding: 15px; border-radius: 5px; margin: 10px 0;">
                            <h3>‚úÖ Formulario Encontrado</h3>
                            <p><strong>Nombre:</strong> ${formulario.nombrePersona}</p>
                            <p><strong>Tel√©fono:</strong> ${formulario.telefono}</p>
                            <p><strong>Tipo:</strong> ${formulario.tipoFormulario}</p>
                            <p><strong>Estado:</strong> ${formulario.estado}</p>
                            <p><strong>Activo:</strong> ${formulario.activo ? 'S√≠' : 'No'}</p>
                            <p><strong>URL de acceso:</strong> <a href="https://formularioclientes-zeta.vercel.app/formulario/${formulario.id}" target="_blank">https://formularioclientes-zeta.vercel.app/formulario/${formulario.id}</a></p>
                        </div>
                    `;
                } else {
                    console.log('‚ùå Formulario no encontrado');
                    document.getElementById('resultado').innerHTML = `
                        <div style="background: #f8d7da; padding: 15px; border-radius: 5px; margin: 10px 0;">
                            <h3>‚ùå Formulario No Encontrado</h3>
                            <p>El formulario con ID "2UxEfD7zMcURyeapZV8G" no existe en la base de datos.</p>
                            <p>Necesitas crear el formulario primero.</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('‚ùå Error:', error);
                document.getElementById('resultado').innerHTML = `
                    <div style="background: #f8d7da; padding: 15px; border-radius: 5px; margin: 10px 0;">
                        <h3>‚ùå Error</h3>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Ejecutar cuando se carga la p√°gina
        window.addEventListener('load', verificarFormulario);
    </script>
</head>
<body style="padding: 20px; font-family: Arial, sans-serif;">
    <h1>Verificaci√≥n de Formulario en Vercel</h1>
    
    <div style="margin: 20px 0;">
        <button onclick="verificarFormulario()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
            üîç Verificar Formulario
        </button>
    </div>
    
    <div id="resultado" style="padding: 10px; background: #f8f9fa; border-radius: 5px; margin: 10px 0;">
        Ejecutando verificaci√≥n autom√°tica...
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #e9ecef; border-radius: 5px;">
        <h3>Instrucciones:</h3>
        <ol>
            <li>Abre las herramientas de desarrollador (F12)</li>
            <li>Ve a la pesta√±a "Console"</li>
            <li>Recarga la p√°gina para ver la verificaci√≥n autom√°tica</li>
            <li>Si el formulario existe, ver√°s la informaci√≥n y el enlace</li>
            <li>Si no existe, necesitas crearlo primero</li>
        </ol>
        
        <h3>URLs de Prueba:</h3>
        <ul>
            <li><a href="https://formularioclientes-zeta.vercel.app/formulario/2UxEfD7zMcURyeapZV8G" target="_blank">https://formularioclientes-zeta.vercel.app/formulario/2UxEfD7zMcURyeapZV8G</a></li>
            <li><a href="https://formularioclientes-zeta.vercel.app/" target="_blank">https://formularioclientes-zeta.vercel.app/</a></li>
        </ul>
    </div>
</body>
</html>
