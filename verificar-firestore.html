<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificar Conexi√≥n Firestore</title>
    <script type="module">
        import { verificarConexionFirestore, debugBuscarFormulario } from './firestore.js';
        
        // Funci√≥n para verificar la conexi√≥n
        async function verificarConexion() {
            try {
                console.log('Iniciando verificaci√≥n de conexi√≥n...');
                const resultado = await verificarConexionFirestore();
                
                if (resultado) {
                    console.log('‚úÖ Verificaci√≥n completada exitosamente');
                    document.getElementById('resultado').innerHTML = '‚úÖ Verificaci√≥n completada. Revisa la consola para ver los detalles.';
                } else {
                    console.log('‚ùå Error en la verificaci√≥n');
                    document.getElementById('resultado').innerHTML = '‚ùå Error en la verificaci√≥n. Revisa la consola para ver los errores.';
                }
            } catch (error) {
                console.error('‚ùå Error:', error);
                document.getElementById('resultado').innerHTML = '‚ùå Error: ' + error.message;
            }
        }
        
        // Funci√≥n para buscar el formulario espec√≠fico
        async function buscarFormulario() {
            try {
                console.log('Buscando formulario espec√≠fico...');
                await debugBuscarFormulario('2UxEfD7zMcURyeapZV8G');
                document.getElementById('busqueda').innerHTML = '‚úÖ B√∫squeda completada. Revisa la consola para ver los resultados.';
            } catch (error) {
                console.error('‚ùå Error en b√∫squeda:', error);
                document.getElementById('busqueda').innerHTML = '‚ùå Error en b√∫squeda: ' + error.message;
            }
        }
        
        // Ejecutar cuando se carga la p√°gina
        window.addEventListener('load', () => {
            verificarConexion();
        });
        
        // Hacer las funciones globales para poder llamarlas desde los botones
        window.verificarConexion = verificarConexion;
        window.buscarFormulario = buscarFormulario;
    </script>
</head>
<body style="padding: 20px; font-family: Arial, sans-serif;">
    <h1>Verificaci√≥n de Conexi√≥n Firestore</h1>
    
    <div style="margin: 20px 0;">
        <button onclick="verificarConexion()" style="padding: 10px 20px; margin-right: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
            üîç Verificar Conexi√≥n
        </button>
        
        <button onclick="buscarFormulario()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">
            üìã Buscar Formulario
        </button>
    </div>
    
    <div id="resultado" style="padding: 10px; background: #f8f9fa; border-radius: 5px; margin: 10px 0;">
        Ejecutando verificaci√≥n autom√°tica...
    </div>
    
    <div id="busqueda" style="padding: 10px; background: #f8f9fa; border-radius: 5px; margin: 10px 0;">
        Haz clic en "Buscar Formulario" para buscar el formulario espec√≠fico.
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #e9ecef; border-radius: 5px;">
        <h3>Instrucciones:</h3>
        <ol>
            <li>Abre las herramientas de desarrollador (F12)</li>
            <li>Ve a la pesta√±a "Console"</li>
            <li>Recarga la p√°gina para ver la verificaci√≥n autom√°tica</li>
            <li>Haz clic en "Buscar Formulario" para buscar el formulario espec√≠fico</li>
            <li>Revisa los logs en la consola para ver qu√© colecciones existen</li>
        </ol>
    </div>
</body>
</html>
